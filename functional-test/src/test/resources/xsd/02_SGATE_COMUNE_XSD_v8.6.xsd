<?xml version="1.0" encoding="utf-8" ?>
	<!-- Ancitel S.p.A. 02_SGATE_COMUNE_XSD v. 6.0 02-02-2009 -->
<xs:schema xmlns:sgate="http://www.sgate.ancitel.it/xsd/" elementFormDefault="qualified" targetNamespace="http://www.sgate.ancitel.it/xsd/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
	<!-- INIZIO Definizione dei tipi primitivi -->
	<xs:simpleType name="tipoNumerico">
		<xs:restriction base="xs:string">
			<xs:whiteSpace value="collapse" />
			<xs:pattern value="(\d)+" />
		</xs:restriction>
	</xs:simpleType>
	<xs:simpleType name="tipoAlfaNumerico">
		<xs:restriction base="xs:string">
			<xs:whiteSpace value="collapse" />
			<xs:pattern value="(\d|[a-z]|[A-Z])+" />
		</xs:restriction>
	</xs:simpleType>
	<xs:simpleType name="tipoSesso">
		<xs:restriction base="xs:string">
			<xs:length value="1" />
			<xs:pattern value="M|F" />
		</xs:restriction>
	</xs:simpleType>
  <xs:simpleType name="tipoCodiceFiscale">
    <xs:restriction base="xs:string">
      <xs:pattern value="([A-Z0-9]){16}|(\d){11}" />
      <xs:maxLength value="16" />
    </xs:restriction>
  </xs:simpleType>
	<xs:simpleType name="tipoCap">
		<xs:restriction base="sgate:tipoNumerico">
			<xs:length value="5" />
		</xs:restriction>
	</xs:simpleType>
	<xs:simpleType name="tipoIstat">
		<xs:restriction base="sgate:tipoNumerico">
			<xs:length value="6" />
		</xs:restriction>
	</xs:simpleType>
	<xs:simpleType name="tipoCharMax80">
		<xs:restriction base="xs:string">
			<xs:minLength value="1" />
			<xs:maxLength value="80" />
		</xs:restriction>
	</xs:simpleType>
	<xs:simpleType name="tipoProtocollo">
		<xs:restriction base="xs:string">
			<xs:minLength value="1" />
			<xs:maxLength value="20" />
			<xs:pattern value="([a-zA-Z0-9])*" />
		</xs:restriction>
	</xs:simpleType>
	<!--
		Il carattere '-' ï¿½ un carattere speciale che indica un range,se non viene preceduto da un carattere di escape '\' l'espressione regolare non funziona in fase di generazione viene generato il seguente errore [WARNING] InvalidRegex: Pattern value '([a-zA-Z0-9-])*' is not a valid regular exression. The reported error
		was: ''-' is an invalid character range. Write '\- '.'.
	-->
	<xs:simpleType name="tipoProtocolloEnte">
		<xs:restriction base="xs:string">
			<xs:pattern value="([a-zA-Z0-9\-])*" />
			<xs:minLength value="1" />
			<xs:maxLength value="35" />
		</xs:restriction>
	</xs:simpleType>
	<xs:simpleType name="tipoPod">
		<xs:restriction base="sgate:tipoAlfaNumerico">
			<xs:maxLength value="15" />
		</xs:restriction>
	</xs:simpleType>
	<xs:simpleType name="tipoNumeroPresa">
		<xs:restriction base="sgate:tipoAlfaNumerico">
			<xs:maxLength value="30" />
		</xs:restriction>
	</xs:simpleType>
	<xs:simpleType name="tipoNumeroCivico">
		<xs:restriction base="xs:string">
			<xs:maxLength value="10" />
		</xs:restriction>
	</xs:simpleType>
	<xs:simpleType name="tipoCodiceAgevolazione">
		<xs:restriction base="xs:string">
			<xs:maxLength value="10" />
			<xs:minLength value="1" />
		</xs:restriction>
	</xs:simpleType>
	<!-- FINE Definizione dei tipi primitivi -->

	<xs:complexType name="tipoErrore">
		<xs:annotation>
			<xs:documentation>
				Identifica una casistica di errore
        	</xs:documentation>
		</xs:annotation>
		<xs:sequence>
			<xs:element name="tipologia">
				<xs:simpleType>
					<xs:restriction base="xs:string">
						<xs:pattern value="TEMPORANEO|PERMANENTE" />
					</xs:restriction>
				</xs:simpleType>
			</xs:element>
			<xs:element name="codice" type="xs:int" />
			<xs:element minOccurs="0" name="dettaglio" type="xs:string" />
		</xs:sequence>
	</xs:complexType>
	<xs:complexType name="tipoRicezioneMessaggio">
		<xs:annotation>
			<xs:documentation>
				Esito della ricezione del messaggio
        	</xs:documentation>
		</xs:annotation>
		<xs:sequence>
			<xs:element name="protocollo" type="sgate:tipoProtocollo" />
			<xs:element name="esito">
				<xs:simpleType>
					<xs:restriction base="xs:string">
						<xs:pattern value="OK|ERR" />
					</xs:restriction>
				</xs:simpleType>
			</xs:element>
			<xs:element minOccurs="0" name="errore" type="sgate:tipoErrore" />
		</xs:sequence>
	</xs:complexType>
	<!-- FINE Definizione dei tipi primitivi -->

  <xs:complexType name="tipoDatiPersonaliPrimari">
    <xs:annotation>
      <xs:documentation>
    		Dati anagrafici del cittadino
    	</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="protocolloSGATE" type="sgate:tipoProtocollo" />
      <xs:element name="dataPresentazione" type="xs:date" />
      <xs:element name="nome" type="sgate:tipoCharMax80" />
      <xs:element name="cognome" type="sgate:tipoCharMax80" />
      <xs:element name="codiceFiscale" type="sgate:tipoCodiceFiscale" />
      <xs:element name="dataNascita" type="xs:date" />
      <xs:element name="statoNascita" type="xs:string" />
      <xs:element name="istatNascita" nillable="true">
        <xs:simpleType>
          <xs:restriction base="sgate:tipoIstat">
            <xs:length value="6" />
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
      <xs:element name="istatResidenza">
        <xs:simpleType>
          <xs:restriction base="sgate:tipoIstat">
            <xs:length value="6" />
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
      <xs:element name="indirizzoResidenza">
        <xs:simpleType>
          <xs:restriction base="xs:string">
            <xs:maxLength value="120" />
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
      <xs:element name="civicoResidenza" type="sgate:tipoNumeroCivico" />
      <xs:element name="capResidenza">
        <xs:simpleType>
          <xs:restriction base="sgate:tipoCap">
            <xs:length value="5" />
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
      <xs:element name="componentiFamigliaAnagrafica" type="xs:int" maxOccurs="1" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="tipoFileAnagraficheComunali">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="cittadino" type="sgate:tipoDatiPersonaliPrimari" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="anagraficheComunali" type="sgate:tipoFileAnagraficheComunali" />
  <xs:complexType name="tipoEsitoAnagraficaComunale">
    <xs:sequence>
    	<xs:element name="protocolloSGATE" type="sgate:tipoProtocollo" />

    	<xs:element name="comuneResidenza"
    		type="sgate:tipoEsitoElementoAnagrafica">
    	</xs:element>
    	<xs:element name="indirizzoResidenza"
    		type="sgate:tipoEsitoElementoAnagrafica">
    	</xs:element>
    	<xs:element name="civicoResidenza"
    		type="sgate:tipoEsitoElementoAnagrafica">
    	</xs:element>
    	<xs:element name="numerositaAnagrafica" type="sgate:tipoEsitoElementoAnagrafica" maxOccurs="1" minOccurs="0"></xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="tipoFileEsitoAnagraficheComunali">
    <xs:sequence>
      <xs:element name="esitoCittadino" type="sgate:tipoEsitoAnagraficaComunale" maxOccurs="unbounded" minOccurs="1"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="esitiAnagraficheComunali" type="sgate:tipoFileEsitoAnagraficheComunali" />

  <xs:complexType name="tipoEsitoElementoAnagrafica">
  	<xs:sequence>
  		<xs:element name="esito" type="xs:boolean"></xs:element>
  		<xs:element name="valoreRiscontrato" type="xs:string" maxOccurs="1" minOccurs="0"></xs:element>
  	</xs:sequence>
  </xs:complexType>
  
  	<!-- ESITI RICEZIONE ANAGRAFICA COMUNALE -->
  <xs:complexType name="tipoFileRicevuteEsitiAnagraficheComunali">
	<xs:annotation>
		<xs:documentation>
			Rappresenta la struttura del file che contiene
			informazioni circa la ricezione degli esiti delle
			anagrafiche inviate dal comune
       	</xs:documentation>
	</xs:annotation>
	<xs:sequence>
		<xs:element maxOccurs="unbounded" name="ricevutaEsitoAnagrafica" type="sgate:tipoRicezioneMessaggio" />
	</xs:sequence>
  </xs:complexType>
  <xs:element name="ricevuteEsitiAnagraficheComunali" type="sgate:tipoFileRicevuteEsitiAnagraficheComunali" />

</xs:schema>